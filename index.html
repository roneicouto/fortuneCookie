<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Biscoitinhos da Sorte</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    #fortune-display { transition: opacity 0.7s ease-in-out, max-height 0.6s ease-in-out; }
  </style>
</head>
<body class="bg-gray-100 flex items-center justify-center h-screen font-sans">
  <main class="text-center p-6">
    <div id="cookie-wrapper" class="mb-6">
      <!-- Use PNG assets (cookie-fechado1.png / cookie-aberto1.png) -->
      <img id="cookie-img"
           src="assets/cookie-fechado1.png"
           alt="Biscoito da sorte fechado"
           role="button"
           tabindex="0"
           aria-pressed="false"
           class="w-48 h-48 md:w-64 md:h-64 cursor-pointer hover:scale-105 transition-transform duration-300 mx-auto">
    </div>

    <div id="fortune-display" class="opacity-0 max-h-0 overflow-hidden transition-all duration-700 ease-in-out mx-auto">
      <div class="bg-white p-4 rounded-lg shadow-lg inline-block max-w-md">
        <p id="fortune-message" class="text-gray-700 text-lg italic"></p>
      </div>
    </div>

    <button id="reset-button" class="hidden mt-6 px-4 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition-colors">
      Pegar outro biscoito
    </button>
  </main>

  <script>
    (function(){
  const cookieImg = document.getElementById('cookie-img');
      const fortuneDisplay = document.getElementById('fortune-display');
      const fortuneMessage = document.getElementById('fortune-message');
      const resetButton = document.getElementById('reset-button');

  // No external image files required — we toggle inline SVGs

      const fortunes = [
        'A persistência é o caminho do êxito.',
        'Acredite em milagres, mas não dependa deles.',
        'O saber não ocupa lugar.',
        'A simplicidade é o último grau de sofisticação.',
        'Sorte é o que acontece quando a preparação encontra a oportunidade.',
        'Otimismo é esperar pelo melhor. Confiança é saber lidar com o pior.',
        'Seja a mudança que você deseja ver no mundo.',
        'A vida é uma jornada, não um destino.',
        'A paciência é amarga, mas seu fruto é doce.',
        'O conhecimento fala, mas a sabedoria escuta.'
      ];

      let isCookieOpen = false;

      function openCookie(){
        if(isCookieOpen) return;
        const randomIndex = Math.floor(Math.random() * fortunes.length);
        fortuneMessage.innerText = fortunes[randomIndex];
        // swap to open PNG
        cookieImg.src = 'assets/cookie-aberto1.png';
        cookieImg.alt = 'Biscoito da sorte aberto';
        cookieImg.setAttribute('aria-pressed','true');
        fortuneDisplay.classList.remove('opacity-0');
        fortuneDisplay.style.maxHeight = '400px';
        resetButton.classList.remove('hidden');
        isCookieOpen = true;
        cookieImg.classList.remove('cursor-pointer','hover:scale-105');
      }

      function resetCookie(){
        fortuneDisplay.classList.add('opacity-0');
        fortuneDisplay.style.maxHeight = '0';
        resetButton.classList.add('hidden');
        cookieImg.src = 'assets/cookie-fechado1.png';
        cookieImg.alt = 'Biscoito da sorte fechado';
        cookieImg.setAttribute('aria-pressed','false');
        isCookieOpen = false;
        fortuneMessage.innerText = '';
        cookieImg.classList.add('cursor-pointer','hover:scale-105');
      }

      // Click + keyboard support on cookie image
      cookieImg.addEventListener('click', openCookie);
      cookieImg.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openCookie(); }
        if (e.key === 'Escape') { resetCookie(); }
      });
      resetButton.addEventListener('click', resetCookie);
    })();
  </script>
</body>
</html>
